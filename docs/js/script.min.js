
(function(){var box=document.querySelector('.slider__area'),control=box.querySelector('.slider__control');var controlWidth=control.getBoundingClientRect().width,controlHalfWidth=controlWidth/2,LIMITS,boxWidth;function getBoxLimits(elem,leftOut,rightOut,topOut,bottomOut,container){return{right:(elem.offsetWidth-(rightOut?rightOut:0))*100/container,left:(0-(leftOut?leftOut:0))*100/container}}
function getCoordX(elemX,limits){if(elemX>=limits.left&&elemX<=limits.right){control.style.left=elemX+'%';}}
function mouseHandler(evt){evt.preventDefault();var startCoords={x:evt.clientX};document.addEventListener('mousemove',onMouseMove);document.addEventListener('mouseup',onMouseUp);function onMouseMove(mouseMoveEvt){mouseMoveEvt.preventDefault();var shift={x:(startCoords.x-mouseMoveEvt.clientX)*100/boxWidth};startCoords={x:mouseMoveEvt.clientX};boxWidth=box.offsetWidth;LIMITS=getBoxLimits(box,controlHalfWidth,controlHalfWidth,0,0,boxWidth);if(mouseMoveEvt.pageX>(box.offsetLeft+boxWidth)){startCoords.x=LIMITS.right}else if(mouseMoveEvt.pageX<box.offsetLeft){startCoords.x=box.offsetLeft}
var elemX=control.offsetLeft*100/boxWidth-shift.x;getCoordX(elemX,LIMITS);}
function onMouseUp(mouseUpEvt){mouseUpEvt.preventDefault();document.removeEventListener('mousemove',onMouseMove);document.removeEventListener('mouseup',onMouseUp);}}
function onTouchMove(touchEvt){var touchLocation=touchEvt.targetTouches[0];boxWidth=box.offsetWidth;LIMITS=getBoxLimits(box,controlHalfWidth,controlHalfWidth,0,0,boxWidth);var elemX=(touchLocation.clientX-box.offsetLeft)*100/boxWidth;getCoordX(elemX,LIMITS);control.addEventListener('touchend',function(){var x=parseInt(box.style.left);var y=parseInt(box.style.top);})}
control.addEventListener('mousedown',mouseHandler);control.addEventListener('touchmove',onTouchMove);window.addEventListener('resize',function(){control.removeEventListener('mousedown',mouseHandler);control.removeEventListener('touchmove',onTouchMove);setTimeout(function(){control.addEventListener('mousedown',mouseHandler);control.addEventListener('touchmove',onTouchMove);})});})();